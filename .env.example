# ==============================================
# CONFIGURACIÓN BÁSICA
# ==============================================
NODE_ENV=development
PORT=3000
HOST=localhost

# ==============================================
# BASE DE DATOS MONGODB
# ==============================================
DB_CNN=mongodb://localhost:27017/matuc-lti-dev

# ==============================================
# JWT SECRETOS (Tu configuración existente)
# ==============================================
SECRETORPRIVATEKEY=tu_secreto_super_seguro_aqui_2024
JWT_EXPIRE=24h

# ==============================================
# CONFIGURACIÓN LTI
# ==============================================
# LTI Provider Configuration
LTI_ISSUER=https://tu-dominio.com
LTI_CLIENT_ID=tu_canvas_developer_key_id
LTI_DEPLOYMENT_ID=1
LTI_KEY_SET_URL=https://canvas.instructure.com/api/lti/security/jwks

# LTI Database (puede usar la misma que MongoDB principal)
LTI_DB_URL=mongodb://localhost:27017/matuc-lti-dev
LTI_DB_NAME=matuc-lti

# LTI Secrets y Keys
LTI_PRIVATE_KEY="-----BEGIN PRIVATE KEY-----
TU_CLAVE_PRIVADA_AQUI
-----END PRIVATE KEY-----"

LTI_PUBLIC_KEY="-----BEGIN PUBLIC KEY-----
TU_CLAVE_PUBLICA_AQUI
-----END PUBLIC KEY-----"

# ==============================================
# CANVAS API CONFIGURATION
# ==============================================
CANVAS_API_URL=https://tu-institucion.instructure.com/api/v1
CANVAS_API_TOKEN=tu_canvas_api_token_aqui

# Canvas OAuth (para grade passback)
CANVAS_CLIENT_ID=tu_canvas_oauth_client_id
CANVAS_CLIENT_SECRET=tu_canvas_oauth_client_secret

# ==============================================
# CONFIGURACIÓN DE SEGURIDAD
# ==============================================
# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESS=true

# CORS Configuration
CORS_ORIGIN=https://tu-institucion.instructure.com,http://localhost:3001
CORS_CREDENTIALS=true

# Security Headers
SECURITY_CONTENT_SECURITY_POLICY=true
SECURITY_HSTS_MAX_AGE=31536000

# ==============================================
# SSL/HTTPS (OBLIGATORIO PARA LTI)
# ==============================================
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private-key.pem
SSL_CA_PATH=/path/to/ssl/ca-bundle.pem

# For development (usar ngrok o similar)
NGROK_AUTH_TOKEN=tu_ngrok_auth_token
NGROK_SUBDOMAIN=tu-subdominio-personalizado

# ==============================================
# LOGGING Y MONITOREO
# ==============================================
LOG_LEVEL=debug
LOG_FILE_PATH=./logs/app.log
LOG_ERROR_FILE_PATH=./logs/error.log

# Monitoring
SENTRY_DSN=tu_sentry_dsn_aqui
NEW_RELIC_LICENSE_KEY=tu_new_relic_key_aqui

# ==============================================
# EMAIL (para notificaciones)
# ==============================================
EMAIL_SERVICE=gmail
EMAIL_USER=tu-email@gmail.com
EMAIL_PASSWORD=tu_app_password
EMAIL_FROM=noreply@tu-dominio.com

# ==============================================
# REDIS (opcional, para sesiones y cache)
# ==============================================
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=tu_redis_password

# ==============================================
# CONFIGURACIÓN DE DESARROLLO
# ==============================================
# Debug
DEBUG=matuc:*
DEBUG_SELECTORS=true
DEBUG_LTI=true
DEBUG_CANVAS_API=true

# Testing
TEST_DB_URL=mongodb://localhost:27017/matuc-lti-test
TEST_TIMEOUT=30000

# ==============================================
# CONFIGURACIÓN DE PRODUCCIÓN
# ==============================================
# Solo para producción
CLUSTER_WORKERS=4
MEMORY_LIMIT=512M
CPU_LIMIT=1000m

# CDN para assets estáticos
CDN_URL=https://cdn.tu-dominio.com
STATIC_FILES_URL=https://static.tu-dominio.com

# ==============================================
# CONFIGURACIÓN DE SELECTORES MATEMÁTICOS
# ==============================================
# Tolerancias por defecto
DEFAULT_NUMBER_TOLERANCE=0.01
DEFAULT_FORMULA_POINTS=20
DEFAULT_SET_COMPARISON_STRICT=true

# Timeouts para evaluación matemática
MATHJS_TIMEOUT=5000
SELECTOR_MAX_ITERATIONS=1000

# ==============================================
# CONFIGURACIÓN DE CANVAS ESPECÍFICA
# ==============================================
# Configuración específica por institución
CANVAS_ACCOUNT_ID=1
CANVAS_TERM_ID=1
CANVAS_DEFAULT_POINTS=100

# Grade passback configuration
GRADE_PASSBACK_ENABLED=true
GRADE_PASSBACK_TIMEOUT=10000
GRADE_PASSBACK_RETRY_ATTEMPTS=3

# ==============================================
# CONFIGURACIÓN DE WEBSOCKETS
# ==============================================
SOCKET_IO_CORS_ORIGIN=*
SOCKET_IO_TRANSPORTS=websocket,polling
SOCKET_IO_PING_TIMEOUT=60000
SOCKET_IO_PING_INTERVAL=25000