# ==============================================
# CONFIGURACIÓN BÁSICA (Tu configuración existente)
# ==============================================
NODE_ENV=development
PORT=3000
HOST=localhost

# ==============================================
# BASE DE DATOS MONGODB (Tu configuración existente)
# ==============================================
DB_CNN=mongodb://localhost:27017/matuc-lti-dev

# ==============================================
# JWT SECRETOS (Tu configuración existente)
# ==============================================
SECRETORPRIVATEKEY=tu_secreto_super_seguro_aqui_2024
JWT_EXPIRE=24h

# ==============================================
# 🆕 CONFIGURACIÓN LTI PARA CANVAS
# ==============================================

# URL base de tu aplicación (IMPORTANTE: debe ser HTTPS en producción)
LTI_ISSUER=https://tu-dominio.ngrok.io
# Para desarrollo local, puedes usar ngrok:
# LTI_ISSUER=https://abc123.ngrok.io

# Configuración del Developer Key que crearás en Canvas
LTI_CLIENT_ID=10000000000001
LTI_DEPLOYMENT_ID=1

# URLs de Canvas (cambiar por tu institución)
LTI_KEY_SET_URL=https://canvas.instructure.com/api/lti/security/jwks
LTI_AUTH_LOGIN_URL=https://canvas.instructure.com/api/lti/authorize_redirect
LTI_AUTH_TOKEN_URL=https://canvas.instructure.com/login/oauth2/token

# Base de datos para LTI (puede ser la misma que MongoDB principal)
LTI_DB_URL=mongodb://localhost:27017/matuc-lti-dev
LTI_DB_NAME=matuc-lti

# Claves para firmar JWT LTI (se generarán automáticamente si no existen)
LTI_PRIVATE_KEY=""
LTI_PUBLIC_KEY=""

# ==============================================
# 🆕 CONFIGURACIÓN CANVAS API (OPCIONAL - para funciones avanzadas)
# ==============================================
CANVAS_API_URL=https://tu-institucion.instructure.com/api/v1
CANVAS_API_TOKEN=tu_canvas_api_token_aqui
CANVAS_ACCOUNT_ID=1

# ==============================================
# 🆕 CONFIGURACIÓN DE SEGURIDAD
# ==============================================
# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS (Canvas LMS)
CORS_ORIGIN=https://tu-institucion.instructure.com,http://localhost:3001

# ==============================================
# 🆕 SSL/HTTPS (OBLIGATORIO PARA LTI EN PRODUCCIÓN)
# ==============================================
# Para desarrollo, usa ngrok o similar
NGROK_AUTH_TOKEN=tu_ngrok_auth_token_aqui

# Para producción
SSL_CERT_PATH=/path/to/ssl/cert.pem
SSL_KEY_PATH=/path/to/ssl/private-key.pem

# ==============================================
# 🆕 LOGGING PARA LTI
# ==============================================
LOG_LEVEL=debug
LOG_LTI_ENABLED=true
LOG_CANVAS_API_ENABLED=true